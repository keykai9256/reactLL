webpackJsonp([1],{"+f5Z":function(t,i,a){t.exports=a.p+"static/img/bg3.b9fbcc2.png"},VS0U:function(t,i,a){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var e=a("Cmve"),n=a("E4LH"),s=a("EOkb"),o={data:function(){return{boxtimer:"",showtip:!1,tipmsg:"",checkval:"0",name:"",phone:"",submitclick:!0,submitimg:!0,arealist:e.a,showarea:!1,province:"",cityname:"",tempimg:"",finallyimg:"",token:"",animationName:"sport ",minitimer:"",fromapp:"",isminiprogram:!1}},created:function(){var t=this;t.token=Object(n.a)("token"),t.fromapp=Object(n.a)("from")?Object(n.a)("from"):"",wx.miniProgram.getEnv(function(i){t.isminiprogram=i.miniprogram})},watch:{name:function(t,i){/^[\u4e00-\u9fa5]+$/gi.test(t)||(this.tip("请输入有效的姓名"),this.name="")},phone:function(t,i){/\D/g.test(t)&&(this.tip("请输入正确的手机号码"),this.phone="")}},methods:{tipimgsize:function(){this.tip("图片大小超出限制（10M以内）")},closearea:function(){this.showarea=!1},showArea:function(){this.showarea=!0},getcity:function(t){this.showarea=!1,this.province=t[0].name,this.cityname=t[1].name},ondwRead:function(t){if(!this.submitimg)return!1;this.submitimg=!1,this.$toast.loading({duration:0,mask:!0,forbidClick:!1,message:"上传中..."});var i=new Image;i.src=t.content,this.dwimg=t.content;var a=this;i.onload=function(){a.ontpys(i)},function t(){var i=this;setTimeout(function(){a.imgmurl?(a.dwimg=a.imgmurl,a.imgmurl="",i.$toast.clear()):t()},1e3)}()},ontpys:function(t){var i=t.width,a=t.height,e=document.createElement("canvas"),n=e.getContext("2d");e.width=400,e.height=a/i*400,n.drawImage(t,0,0,e.width,e.height);var s=e.toDataURL("image/jpeg",.8),o=this.dataURLtoFile(s,Date.parse(Date())+".jpg");o={content:s,file:o},this.onimg(o)},dataURLtoFile:function(t,i){for(var a=t.split(","),e=a[0].match(/:(.*?);/)[1],n=atob(a[1]),s=n.length,o=new Uint8Array(s);s--;)o[s]=n.charCodeAt(s);return new File([o],i,{type:e})},onimg:function(t){var i=this,a=new FormData;a.append("goods_imgs",t.file),Object(s.b)(a).then(function(a){i.tempimg=t.content,i.finallyimg=a.data.data.goods_imgs,i.submitimg=!0,i.$toast.clear()}).catch(function(t){i.submitimg=!0,i.$toast.clear(),i.tip("上传失败")})},submit:function(){var t=this;if(!t.submitclick)return!1;if(!/^[\u4e00-\u9fa5]+$/gi.test(t.name)||""===t.name)return t.tip("请输入有效的姓名"),!1;if(""===t.phone||!Object(n.b)(t.phone))return t.tip("请输入正确的手机号码"),!1;if(""===t.province)return t.tip("请选择您所在的城市"),!1;if(""===t.finallyimg)return t.tip("请上传图片"),!1;t.submitclick=!1;var i=new FormData;i.append("username",t.name),i.append("mobile",t.phone),i.append("province_name",t.province),i.append("city_name",t.cityname),i.append("type",4),i.append("qrcode",t.finallyimg),Object(s.a)(i).then(function(i){t.tip(i.data.msg),t.submitclick=!0,i.data.status&&("app"==t.fromapp&&t.appCallback(),1==t.isminiprogram&&(clearTimeout(t.minitimer),t.minitimer=setTimeout(function(){t.miniprogramback()},800)))})},appCallback:function(){document.location.href="appback://goback"},miniprogramback:function(){wx.miniProgram.navigateTo({url:"/subPackagePublish/pages/subRecurit/subRecurit"})},miniprogramhome:function(){wx.miniProgram.switchTab({url:"../../../pages/Shop/Shop"})},changecheck:function(t){this.checkval=t},tip:function(t){var i=this;i.showtip=!0,i.tipmsg=t,clearTimeout(i.boxtimer),i.boxtimer=setTimeout(function(){i.showtip=!1},1500)}}},c={render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"apply-wine-cardbox"},["app"!=t.fromapp&&1==t.isminiprogram?e("div",{staticClass:"home",on:{click:t.miniprogramhome}},[e("img",{staticStyle:{width:".8rem",height:".8rem"},attrs:{src:a("LPNo")}})]):t._e(),t._v(" "),e("img",{staticClass:"bgimg",attrs:{src:a("+f5Z")}}),t._v(" "),e("div",{staticClass:"apply-wine-card"},[e("div",{staticClass:"input_box"},[e("div",{staticClass:"input_one"},[e("div",{staticClass:"right"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"rightinput",attrs:{type:"text",placeholder:"请输入姓名"},domProps:{value:t.name},on:{input:function(i){i.target.composing||(t.name=i.target.value)}}})])])]),t._v(" "),e("div",{staticClass:"input_box"},[e("div",{staticClass:"input_one"},[e("div",{staticClass:"right"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.phone,expression:"phone"}],staticClass:"rightinput",attrs:{type:"text",placeholder:"请输入手机号码",maxlength:"11"},domProps:{value:t.phone},on:{input:function(i){i.target.composing||(t.phone=i.target.value)}}})])])]),t._v(" "),e("div",{staticClass:"citytitle"},[t._v("您所在的城市")]),t._v(" "),e("div",{staticClass:"input_box"},[""!==t.province?e("div",{staticClass:"input_one",staticStyle:{height:".4rem"},on:{click:t.showArea}},[e("div",{staticClass:"right rightcheck tc"},[t._v("\n                "+t._s(t.province)+"\n            ")]),t._v(" "),e("div",{staticClass:"right rightcheck rightcheckright tc"},[t._v("\n                "+t._s(t.cityname)+"\n            ")])]):t._e(),t._v(" "),""===t.province?e("div",{staticClass:"input_one",staticStyle:{height:".4rem",color:"#999"},on:{click:t.showArea}},[e("div",{staticClass:"right rightcheck tc"},[t._v("\n                请选择省份\n            ")]),t._v(" "),e("div",{staticClass:"right rightcheck rightcheckright tc"},[t._v("\n                请选择城市\n            ")])]):t._e()]),t._v(" "),e("div",{staticClass:"citytitle"},[t._v("您的微信二维码名片")]),t._v(" "),e("div",{staticClass:"uploadimgbox"},[e("van-uploader",{attrs:{"after-read":t.ondwRead,accept:"image/*","max-size":10485760},on:{oversize:t.tipimgsize}},[""===t.tempimg?e("div",{},[e("div",{staticClass:"uptxt1"},[t._v("+")]),t._v(" "),e("div",{staticClass:"uptxt2"},[t._v("上传图片")]),t._v(" "),e("div",{staticClass:"uptxt3"},[t._v("限10M以内")])]):t._e(),t._v(" "),""!==t.tempimg?e("div",{staticClass:"tempimgbox"},[e("img",{staticClass:"tempimg",attrs:{src:t.tempimg}})]):t._e()])],1),t._v(" "),e("transition",{attrs:{name:"bounce"}},[e("van-area",{directives:[{name:"show",rawName:"v-show",value:t.showarea,expression:"showarea"}],attrs:{"area-list":t.arealist,"columns-num":2,value:"110101"},on:{cancel:t.closearea,confirm:t.getcity}})],1)],1),t._v(" "),e("div",{staticClass:"tijiao",on:{click:t.submit}},[t._v("提交")]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.showtip,expression:"showtip"}],staticClass:"pop-content"},[e("div",{staticClass:"pop-message-box"},[e("div",{staticClass:"pop-inputbox"},[t._v(t._s(t.tipmsg))])])])])},staticRenderFns:[]};var r=a("VU/8")(o,c,!1,function(t){a("arRa")},"data-v-db156a44",null);i.default=r.exports},arRa:function(t,i){}});